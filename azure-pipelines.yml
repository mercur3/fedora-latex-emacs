
###############################################################################
# WARNING                                                                     #
# This file is autogenerated. Do NOT edit this file. Run =./build.py= instead #
###############################################################################

trigger:
  - master
pr:
  autoCancel: true
  branches:
    include:
      - master
pool:
  vmImage: ubuntu-latest
jobs:
  - job:
    displayName: Building on Fedora 35
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          cd build
          echo "------------------------------------------------------\n"
          docker build -f Dockerfile.35-base   -t mercur3/fedora-latex-emacs:35-base   .
          docker build -f Dockerfile.35-medium -t mercur3/fedora-latex-emacs:35-medium .
          docker build -f Dockerfile.35-full   -t mercur3/fedora-latex-emacs:35-full   .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/__tag_name__ .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/fedora-latex-emacs:35-medium
          docker push mercur3/fedora-latex-emacs:35-full
        displayName: docker push mercur3/__tag_name__
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building on Fedora 36
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          cd build
          echo "------------------------------------------------------\n"
          docker build -f Dockerfile.36-base   -t mercur3/fedora-latex-emacs:36-base   .
          docker build -f Dockerfile.36-medium -t mercur3/fedora-latex-emacs:36-medium .
          docker build -f Dockerfile.36-full   -t mercur3/fedora-latex-emacs:36-full   .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/__tag_name__ .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/fedora-latex-emacs:36-medium
          docker push mercur3/fedora-latex-emacs:36-full
        displayName: docker push mercur3/__tag_name__
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building on Fedora 37
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          cd build
          echo "------------------------------------------------------\n"
          docker build -f Dockerfile.37-base   -t mercur3/fedora-latex-emacs:37-base   .
          docker build -f Dockerfile.37-medium -t mercur3/fedora-latex-emacs:37-medium .
          docker build -f Dockerfile.37-full   -t mercur3/fedora-latex-emacs:37-full   .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/__tag_name__ .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/fedora-latex-emacs:37-medium
          docker push mercur3/fedora-latex-emacs:37-full
        displayName: docker push mercur3/__tag_name__
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building on Fedora 38
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          cd build
          echo "------------------------------------------------------\n"
          docker build -f Dockerfile.38-base   -t mercur3/fedora-latex-emacs:38-base   .
          docker build -f Dockerfile.38-medium -t mercur3/fedora-latex-emacs:38-medium .
          docker build -f Dockerfile.38-full   -t mercur3/fedora-latex-emacs:38-full   .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/__tag_name__ .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/fedora-latex-emacs:38-medium
          docker push mercur3/fedora-latex-emacs:38-full
        displayName: docker push mercur3/__tag_name__
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


